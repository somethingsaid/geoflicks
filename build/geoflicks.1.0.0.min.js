!function(e){function o(t){if(a[t])return a[t].exports;var l=a[t]={exports:{},id:t,loaded:!1};return e[t].call(l.exports,l,l.exports,o),l.loaded=!0,l.exports}var a={};return o.m=e,o.c=a,o.p="",o(0)}([function(e,o){function a(){var e={center:new google.maps.LatLng(p[0],p[1]),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP};c=new google.maps.Map(document.getElementById("map"),e),google.maps.event.addListener(c,"click",function(e){t(e.latLng),p=[Number(e.latLng.lat()),Number(e.latLng.lng())],console.log("New click coordinates: "+p),$("#album").empty(),$(".fail").hide(),$(".success").hide(),$(".loading").show(),$("#next-page").addClass("disabled"),n(p)})}function t(e){var o=new google.maps.Marker({position:e,map:c}),a=new google.maps.InfoWindow({content:"Lat: "+Number(e.lat()).toFixed(4)+"<br>Lng: "+Number(e.lng()).toFixed(4)});a.open(c,o)}function l(){var e=document.createElement("script");e.src="http://maps.googleapis.com/maps/api/js?key="+h+"&callback=initMap",document.body.appendChild(e)}function s(e){for(var o=0,a="";o<e.length;)for(var t=1;5>t;t++){if(o<e.length){a+="<div class='row'>";for(var l=1;5>l;l++)if(o<e.length){var s="<a target='_blank' href='"+e[o].flickrPage+"'><img class='img-thumbnail' src='"+e[o].url+"' width='280' height='190'></a>";a+="<div class='col-lg-3 col-md-4 col-sm-6 col-xs-12'>"+s+"</div>",o+=1}}a+="</div>"}$("#album").append(a),$(".loading").hide(),$("#next-page").removeClass("disabled"),$(".success").show().css("color","#3cba54")}function n(e){console.log("ready to hit flickr");var o={format:"json",method:"flickr.photos.search",api_key:b,nojsoncallback:1,lat:e[0],lon:e[1],content_type:1,sort:"interestingness_desc",accuracy:u,min_taken_date:moment().subtract(12,"months").format("YYYY-MM-DD 00:00:00"),max_upload_date:moment().format("YYYY-MM-DD 00:00:00"),radius:m,radius_units:"km",per_page:16,page:g,extras:"url_t, url_s, url_m, url_z"};$.ajax({url:"https://api.flickr.com/services/rest/",type:"GET",data:o}).done(function(e){console.log(e),d=[],$.each(e.photos.photo,function(e,o){var a={title:o.title,url:o.url_m,flickrPage:"https://www.flickr.com/photos/"+o.owner+"/"+o.id};d.push(a)}),console.log(d),d.length>0?s(d):($(".loading").hide(),$(".success").css("color","red").show(),$(".fail").show())})}function i(e){var o={key:h,address:e};$.ajax({url:"https://maps.googleapis.com/maps/api/geocode/json",type:"GET",data:o}).done(function(o){console.log(o),o.results.length>0?(p=[],p.push(o.results[0].geometry.location.lat),p.push(o.results[0].geometry.location.lng),a(),console.log(e+": "+p),n(p)):(console.log("no results"),$(".loading").hide(),$(".success").css("color","red").show(),$(".fail").show())}).fail(function(e,o){console.log("call failed")})}var c,r="",d=[],g=1,u=16,m=5,p=[51.508742,-.12085],f=["Labuan Bajo, Komodo","New York City, New York","Paris, France","Halstatt, Austria","Sucre, Bolivia","Bhutan","Otaru, Hokkaido"],h="AIzaSyBbLnfemMfCf7sJ83aiYAzb8-HR7nJAoOE",b="05b7506e3fd86ae08a540a59e4e7f40d",k=!1;$(document).ready(function(){console.log("Current date: "+moment().format("YYYY-MM-DD 00:00:00")),console.log("6 months ago: "+moment().subtract(6,"months").format("YYYY-MM-DD 00:00:00")),$("#next-page").addClass("disabled"),l(),$("#location-getter").submit(function(e){e.preventDefault(),$("#album").empty(),$(".fail").hide(),$(".success").hide(),$(".loading").show(),g=1,r=$(this).find("input[name='location']").val(),console.log("user entered: "+r),u=16,m=5,i(r),$("#next-page").addClass("disabled")}),$("#next-page").click(function(){$("#next-page").hasClass("disabled")||(g+=1,console.log("show next batch of results for same location: "+r),$("#album").empty(),$(".fail").hide(),$(".success").hide(),$(".loading").show(),$("#next-page").addClass("disabled"),n(p))}),$("#lucky").click(function(){$("#album").empty(),$(".fail").hide(),$(".success").hide(),$(".loading").show(),$("#next-page").addClass("disabled"),u=8,m=30,r=f[Math.floor(Math.random()*f.length)],console.log("Random location is: "+r),i(r)}),$("#menu-toggle").click(function(e){e.preventDefault(),$("#wrapper").toggleClass("toggled")}),$("#map-toggle").click(function(e){e.preventDefault(),$("#map").toggleClass("toggled"),0==k?($("#map-toggle").text("Click anywhere on map"),k=!0,a()):($("#map-toggle").text("Search via Google Maps"),k=!1)})})}]);
//# sourceMappingURL=geoflicks.1.0.0.min.js.map